å¾ˆå¥½ï¼Œé€™ä¸€é¡Œæˆ‘ç›´æ¥å¹«ä½ è¨­è¨ˆä¸€å€‹**ã€ŒçœŸçš„çµ¦æ–°æ‰‹ç·´åŠŸç”¨ã€**çš„å°ˆæ¡ˆã€‚  
ä½ ç…§è‘—åšä¸€éï¼Œ**DI / interface / NUnit æœƒä¸€æ¬¡å…¨éƒ¨æ‰“é€š**ã€‚

æˆ‘æœƒçµ¦ä½ ï¼š

1ï¸âƒ£ ç·´ç¿’å°ˆæ¡ˆçš„ã€Œæ•…äº‹èƒŒæ™¯ã€  
2ï¸âƒ£ å°ˆæ¡ˆçµæ§‹  
3ï¸âƒ£ å®Œæ•´ç¨‹å¼ç¢¼ï¼ˆå¯ç›´æ¥å»ºç«‹ï¼‰  
4ï¸âƒ£ ç·´ç¿’æ­¥é©Ÿï¼ˆä½ ç…§é †åºåšï¼‰

ä¸æœƒç”¨ ASP.NETã€ä¸ç”¨å®¹å™¨ï¼Œ**å…ˆç”¨æœ€ç´”çš„ DI æ€ç¶­**ã€‚

---

# ä¸€ã€ç·´ç¿’å°ˆæ¡ˆä¸»é¡Œï¼ˆç°¡å–®åˆçœŸå¯¦ï¼‰

## ğŸ¯ ä¸»é¡Œï¼š**è¨‚å–®é€šçŸ¥ç³»çµ±**

éœ€æ±‚åªæœ‰ä¸€å¥è©±ï¼š

> ä¸‹è¨‚å–®å¾Œï¼Œç³»çµ±è¦ã€Œç™¼é€é€šçŸ¥ã€

é€šçŸ¥æ–¹å¼æœªä¾†å¯èƒ½æœ‰ï¼š

- Email    
- Line    
- ç°¡è¨Š    

ğŸ‘‰ **é€™éå¸¸é©åˆç·´ interface + DI + NUnit**

---

# äºŒã€å°ˆæ¡ˆçµæ§‹ï¼ˆç…§é€™å€‹å»ºï¼‰

å»ºç«‹ä¸€å€‹ **Solution**

```
OrderNotificationDemo
â”‚
â”œâ”€ OrderNotification.Core
â”‚   â”œâ”€ INotificationSender.cs
â”‚   â”œâ”€ Order.cs
â”‚   â”œâ”€ NotificationResult.cs
â”‚   â”œâ”€ EmailNotificationSender.cs
â”‚   â””â”€ OrderService.cs
â”‚
â””â”€ OrderNotification.Tests
    â”œâ”€ FakeNotificationSender.cs
    â””â”€ OrderServiceTests.cs
```

---

# ä¸‰ã€æ­£å¼ç¨‹å¼ç¢¼ï¼ˆCoreï¼‰

## 1ï¸âƒ£ INotificationSender.csï¼ˆä»‹é¢ï¼‰

```csharp
public interface INotificationSender
{
    NotificationResult Send(Order order);
}
```

---

## 2ï¸âƒ£ Order.csï¼ˆDTOï¼‰

```csharp
public class Order
{
    public string OrderNo { get; set; }
    public decimal Amount { get; set; }
}
```

---

## 3ï¸âƒ£ NotificationResult.cs

```csharp
public class NotificationResult
{
    public bool Success { get; set; }
    public string Message { get; set; }
}
```

---

## 4ï¸âƒ£ EmailNotificationSender.csï¼ˆçœŸå¯¦å¯¦ä½œï¼‰

```csharp
public class EmailNotificationSender : INotificationSender
{
    public NotificationResult Send(Order order)
    {
        // å‡è£åœ¨å¯„ Email
        return new NotificationResult
        {
            Success = true,
            Message = $"Email å·²å¯„å‡ºï¼Œè¨‚å–®ï¼š{order.OrderNo}"
        };
    }
}
```

---

## 5ï¸âƒ£ OrderService.csï¼ˆâ­ é‡é»ï¼‰

```csharp
public class OrderService
{
    private readonly INotificationSender _sender;

    // ğŸ‘‰ DIï¼šå¾å¤–é¢æ³¨å…¥
    public OrderService(INotificationSender sender)
    {
        _sender = sender;
    }

    public NotificationResult PlaceOrder(Order order)
    {
        if (order.Amount <= 0)
        {
            return new NotificationResult
            {
                Success = false,
                Message = "è¨‚å–®é‡‘é¡éŒ¯èª¤"
            };
        }

        return _sender.Send(order);
    }
}
```

ğŸ“Œ **é€™å€‹ class æ˜¯ä½ æ¸¬è©¦çš„æ ¸å¿ƒ**

---

# å››ã€æ¸¬è©¦ç¨‹å¼ç¢¼ï¼ˆNUnitï¼‰

## 6ï¸âƒ£ FakeNotificationSender.csï¼ˆå‡å¯¦ä½œï¼‰

```csharp
public class FakeNotificationSender : INotificationSender
{
    public NotificationResult Send(Order order)
    {
        return new NotificationResult
        {
            Success = true,
            Message = "Fake é€šçŸ¥æˆåŠŸ"
        };
    }
}
```

---

## 7ï¸âƒ£ OrderServiceTests.cs

```csharp
using NUnit.Framework;

[TestFixture]
public class OrderServiceTests
{
    [Test]
    public void PlaceOrder_ValidAmount_ShouldSendNotification()
    {
        // Arrange
        var sender = new FakeNotificationSender();
        var service = new OrderService(sender);

        var order = new Order
        {
            OrderNo = "ORD001",
            Amount = 1000
        };

        // Act
        var result = service.PlaceOrder(order);

        // Assert
        Assert.IsTrue(result.Success);
        Assert.AreEqual("Fake é€šçŸ¥æˆåŠŸ", result.Message);
    }

    [Test]
    public void PlaceOrder_InvalidAmount_ShouldFail()
    {
        // Arrange
        var sender = new FakeNotificationSender();
        var service = new OrderService(sender);

        var order = new Order
        {
            OrderNo = "ORD002",
            Amount = 0
        };

        // Act
        var result = service.PlaceOrder(order);

        // Assert
        Assert.IsFalse(result.Success);
        Assert.AreEqual("è¨‚å–®é‡‘é¡éŒ¯èª¤", result.Message);
    }
}
```

---

# äº”ã€ä½ ç¾åœ¨ã€Œå¯¦éš›å­¸åˆ°ã€çš„æ˜¯ä»€éº¼ï¼Ÿ

### âœ… Interface

- `INotificationSender` æ˜¯åˆç´„
    
- Email / Fake éƒ½å¯ä»¥æ›¿æ›
    

### âœ… DIï¼ˆå»ºæ§‹å¼æ³¨å…¥ï¼‰

- `OrderService` **ä¸è‡ªå·± new**
    
- å¤–é¢æ±ºå®šè¦ç”¨èª°
    

### âœ… NUnit

- ä¸é€£å¤–
    
- ä¸é  UI
    
- æ¸¬çš„æ˜¯ã€Œè¡Œç‚ºã€
    

---

# å…­ã€å»ºè­°ä½ ç…§é€™å€‹é †åºç·´ï¼ˆå¾ˆé‡è¦ï¼‰

### ğŸ” ç¬¬ 1 é—œï¼ˆç¾åœ¨ï¼‰

âœ” è·‘éæ¸¬è©¦  
âœ” ç¢ºå®šå…¨éƒ¨ç¶ ç‡ˆ

---

### ğŸ” ç¬¬ 2 é—œï¼ˆä½ è‡ªå·±æ”¹ï¼‰

- æ–°å¢ `LineNotificationSender`
    
- ä¸æ”¹ `OrderService`
    
- æ¸¬è©¦ä»ç„¶è¦é
    

---

### ğŸ” ç¬¬ 3 é—œï¼ˆé€²éšï¼‰

- è®“ `FakeNotificationSender` å¯ä»¥ã€ŒæŒ‡å®šæˆåŠŸæˆ–å¤±æ•—ã€    
- æ¸¬å¤±æ•—æƒ…å¢ƒ
    

---

# ä¸ƒã€ä¸€å¥æ–°æ‰‹ä¸€å®šè¦è¨˜ä½çš„è©±

> **ã€Œæˆ‘èƒ½ç”¨ Fake æ¸¬è©¦ï¼Œä»£è¡¨æˆ‘æ¶æ§‹æ˜¯å°çš„ã€**

---

å¦‚æœä½ é¡˜æ„ï¼Œä¸‹ä¸€æ­¥æˆ‘å¯ä»¥ç›´æ¥å‡ºã€Œä½œæ¥­é¡Œã€çµ¦ä½ ï¼Œä¾‹å¦‚ï¼š

- â“ å“ªå€‹åœ°æ–¹ã€Œä¸è©²æŠ½ä»‹é¢ã€    
- ğŸ§ª è«‹ä½ è£œä¸€å€‹æ¸¬è©¦ï¼ˆæˆ‘å¹«ä½ æ”¹ï¼‰    
- ğŸ’£ æˆ‘æ•…æ„å¯«ä¸€å€‹å£ç‰ˆæœ¬ï¼Œè®“ä½ ä¿®
    

ä½ åªè¦èªªï¼š  
ğŸ‘‰ã€Œ**çµ¦æˆ‘ä¸‹ä¸€é—œ**ã€