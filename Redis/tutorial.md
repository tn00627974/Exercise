### Redis常用操作命令整理

## 操作String（字串）類型

####  1、SET 設置鍵值

要設置一個鍵值對，請使用SET命令。 例如，要將鍵「name」設置為值「ulysses」，可以執行以下操作：
```r
127.0.0.1:6379> SET name ulysses
# 1
```

####  2、GET 獲取鍵值

要獲取鍵值，請使用GET命令。 例如，要獲取鍵「name」的值，可以執行以下操作：
```r
127.0.0.1:6379> GET name
# ulysses
```

 這將返回鍵“name”的值，“ulysses”。


##### 將 Redis GET返 回時 以原始的方式來顯示內容  加上參數 --raw

```r
127.0.0.1:6379> SET name 最終幻想
# 1 
```

`1` 成功。

```r
127.0.0.1:6379> GET name 最終幻想
# "\xe6\x9c\x80\xe7\xb5\x82\xe5\xb9\xbb\xe6\x83\xb3" 中文被換成十六進制
```

`\x` : 為 十六進制

退出redis-cli
```r
127.0.0.1:6379> quit
# "\xe6\x9c\x80\xe7\xb5\x82\xe5\xb9\xbb\xe6\x83\xb3" 中文被換成十六進制
```

啟動redis 加上參數 --raw
```r
127.0.0.1:6379> redis-cli --raw
```

- 查詢 
```r
127.0.0.1:6379> GET gamename 
# 最終幻想 ✅正確
```

![](Pasted%20image%2020250929111453.png)

####  3、設置過期時間

 查看過期指定key的過期時間，可以用TTL命令。
```r
127.0.0.1:6379> TTL name
# -1 
```

`-1` : 代表沒有設置過期時間 

要為一個鍵設置過期時間，請使用EXPIRE命令。 例如，要將鍵「name」的過期時間設置為 **5** 秒，可以執行以下操作：
```r
127.0.0.1:6379> EXPIRE name 5
# 1 
```

 查看過期指定key的過期時間，可以用TTL命令。
```r
127.0.0.1:6379> TTL name
# 4 倒數中 ...
127.0.0.1:6379> TTL name
# 3 倒數中 ...
127.0.0.1:6379> TTL name
# 2 倒數中 ...
127.0.0.1:6379> TTL name
# 1 倒數中 ...
127.0.0.1:6379> TTL name
# -2 結束刪除 ...
```

返回的結果便是剩餘時間（到期key會自動刪除[目前先這麼認為，不同版本的不同角色處理有差異]），如果返回-1，則表示無過期時間

`-2`，說明key不存在。

鍵存在返回 `1`
鍵不存在返回`0`

####  4、三種方式可判斷鍵是否存在

![](Pasted%20image%2020250929114511.png)

##### 使用 EXISTS 指令

要檢查一個鍵是否存在，請使用EXISTS命令。 例如，要檢查鍵「name」是否存在，可以執行以下操作：
```r
127.0.0.1:6379> EXISTS name
# 0 
```

`0` : 不存在
##### 使用 TYPE 指令

```r
127.0.0.1:6379> TYPE name
# none 
```

`none` : 沒有這個類型，代表 key 不存在。

返回對應的類型（如，string）則說明key存在，返回“none”說明key不存在。

##### 使用 TTL 指令

```r
127.0.0.1:6379> TTL name
# -1 
```

####  5、刪除鍵

要刪除一個鍵，請使用DEL命令。 例如，要刪除鍵「name」，可以執行以下操作：
```r
127.0.0.1:6379> DEL aaa
```

####  6、自增/自減操作

要對一個鍵進行自增操作，請使用INCR命令。 例如，要將鍵「count」自增1，可以執行以下操作：

先 SET 設置 一個`count` 變數為 10 ( INT )  並使用 GET 查看內容
```r
127.0.0.1:6379> SET count 10
# OK 
127.0.0.1:6379> GET count 10
# 10
```

##### 使用 INCR命令

```r
127.0.0.1:6379> INCR count
# 11
127.0.0.1:6379> INCR count
# 12
127.0.0.1:6379> INCR count
# 13
```

##### 使用 DECR命令

類似地，要對一個鍵進行自減操作，請使用DECR命令，例如，要將鍵「count」自減1，可以執行以下操作：
```r
127.0.0.1:6379> DECR count
# 12
127.0.0.1:6379> DECR count
# 11
127.0.0.1:6379> DECR count
# 10
```

##### 使用 SETEX 指令

這個命令 是[[#1、SET 設置鍵值 | SET ]] + [[#使用 EXISTS 指令 | EXPIRE]] 的合體 

```r
127.0.0.1:6379> SETEX name 5 最終幻想
# OK
127.0.0.1:6379> TTL name 
# 4 倒數中..
# 3 倒數中..
# 2 倒數中..
# 1 倒數中..
# -2 結束刪除 ...
```
SETEX name 5 最終幻想 `設置 Key的值 name  + 5秒鐘 + value 的值

##### 使用 SETNX 指令

```r
127.0.0.1:6379> SETNX name 最終幻想
# OK
127.0.0.1:6379> SETNX name 最終幻想1
# 0
# 代表不能被修改，已經有name這個值
127.0.0.1:6379> GET name
# 最終幻想
```

---

##  操作哈希表（Hash類型）

Redis中的Hash類型是一個鍵值對的集合，其中每個鍵都映射到一個值。 下面是Redis中Hash類型的常見操作：

####  1、設置Hash值

要設置一個Hash值，請使用HSET命令。 例如，要將「person」哈希中的「name」字段設置為「ulysses」，age 「28 」可以執行以下操作：

```r
127.0.0.1:6379> HSET person name ulysses
# 1 
127.0.0.1:6379> HSET person age 28
# 1 
```

####  2、獲取Hash值

要獲取一個Hash值，請使用HGET命令。 例如，要獲取「person」哈希中的「name」字段的值，可以執行以下操作：

```r
127.0.0.1:6379> HGET person name
# ulysses
127.0.0.1:6379> HGET person age
# 28
```

####  3、獲取所有Hash值

要獲取所有的Hash值，請使用HGETALL命令。 例如，要獲取「person」哈希中所有的鍵值對，可以執行以下操作：

這將返回一個包含所有鍵值對的清單
```r
127.0.0.1:6379> HGETALL person
# name
# ulysses
# age
# 28
```

####  4、刪除Hash值

要刪除一個Hash值，請使用HDEL命令。 例如，要刪除「person」哈希中的age字段，可以執行以下操作：

```r
127.0.0.1:6379> HDEL person age
# 1

127.0.0.1:6379> HGETALL person
# name
# ulysses
# 會看到只剩下name 
```

####  5、檢查Hash值是否存在

要檢查一個Hash值是否存在，請使用HEXISTS命令。 例如，要檢查「person」哈希中是否存在「name」字段，可以執行以下操作：

```r
127.0.0.1:6379> HEXISTS person name
# 1
127.0.0.1:6379> HEXISTS person age
# 0
```

 如果存在，將返回1; 否則返回0。

####  6、獲取Hash中所有的鍵

要獲取一個Hash中所有的鍵，請使用HKEYS命令。 例如，要獲取「person」哈希中的所有鍵 KEY ，可以執行以下操作：

```r
127.0.0.1:6379> HKEYS person
# name
```

 這將返回一個包含所有鍵的清單。

####  7、獲取Hash中所有的值

要獲取一個Hash中所有的值，請使用HVALS命令。 例如，要獲取「person」哈希中的所有值 Value，可以執行以下操作：

```r
127.0.0.1:6379> HVALS person
# ulysses 
```

 這將返回一個包含所有值的清單。

---
##  操作清單（list類型）

Redis中的List類型是一個鏈表結構，其中每個節點都包含一個字元串值。 下面是Redis中List類型的常見操作：
創建一個新的list類型 : 可以使用  `LPUSH + key element` 、 `RPUSH + key element`  
####  1、在清單的頭部插入元素

使用 LPUSH 

請使用LPUSH命令在清單的頭部插入元素，例如，要在名為「mylist」的清單的頭部插入值為「b」的元素，可以執行以下操作：

```r
127.0.0.1:6379> LPUSH mylist b 
# 1 
127.0.0.1:6379> LPUSH mylist a # 從頭再添加 a
# 2
```

####  2、在清單的尾部插入元素

使用 LPUSH 

請使用RPUSH命令在清單的尾部插入元素， 例如，要在名為「mylist」的清單的尾部插入值為「c」的元素，可以執行以下操作：

```r
127.0.0.1:6379> RPUSH mylist c # 從尾巴添加 c 
# 3 
```

####  3、獲取清單長度

要獲取清單的長度，請使用LLEN命令。 例如，要獲取名為「mylist」的清單的長度，可以執行以下操作：

```r
127.0.0.1:6379> LLEN mylist
# 3
```

 這將返回清單的長度。

####  4、獲取清單中的單個元素

要獲取清單中的元素，請使用LINDEX命令。 例如，要獲取名為「mylist」的清單中的第一個元素，可以執行以下操作：

```r
127.0.0.1:6379> LINDEX mylist 0 # 取得第一個
# a
127.0.0.1:6379> LINDEX mylist 2 # 取得第三個
# c
```

####  5、獲取清單的範圍

要獲取清單的一部分，請使用LRANGE命令。 例如，要獲取名為「mylist」的清單中從第二個到第四個元素之間的元素，可以執行以下操作：

這將返回一個包含第一個到最後一個元素之間的所有元素的清單。
```r
127.0.0.1:6379> LRANGE mylist 0 -1 
# a
# b
# c
```

####  6、刪除清單中的元素

要刪除清單中的元素，請使用LREM命令。 例如，要刪除名為「mylist」的清單中的所有值為「ccc」的元素，可以執行以下操作：

```r
127.0.0.1:6379> LPUSH mylist a # 再添加一個 a
# 4
127.0.0.1:6379> LRANGE mylist 0 - 1
# a
# b 
# c
# a
127.0.0.1:6379> LREM mylist 0 a
# 2 
127.0.0.1:6379> LRANGE mylist 0 - 1
# b
# c
# 將a元素全都刪除

```
####  7、彈出清單中的元素
##### 使用 LPOP 命令
要從清單的頭部彈出元素，請使用LPOP命令。 例如，要從名為「mylist」的清單的頭部彈出一個元素，可以執行以下操作：

```r
127.0.0.1:6379> LPUSH mylist a # 從頭再添加一個 a
127.0.0.1:6379> RPUSH mylist d # 從尾再添加一個 d
127.0.0.1:6379> LRANGE mylist 0 -1 
# a 
# b 
# c
# d
127.0.0.1:6379> LPOP mylist # 將頭的a排除
# a # 這將彈出並返回清單的第一個元素。
```

##### 使用 RPOP命令
要從清單的尾部彈出元素，RPOP命令。 例如，要從名為「mylist」的清單的尾部彈出一個元素，可以執行以下操作：

```r
127.0.0.1:6379> LPOP mylist # 將頭的a排除
# d # 這將彈出並返回清單的第一個元素。
```

💡也可以使用 LPOP命令 和 RPOP命令 刪除多個內容 : 
```r
127.0.0.1:6379> LRANGE mylist 0 -1 
# a 
# b 
# c
# d
127.0.0.1:6379> LPOP mylist 2  # 將頭的兩個元素排除
# a
# b
127.0.0.1:6379> RPOP mylist 2  # 將尾的兩個元素排除
# c
# d
```
