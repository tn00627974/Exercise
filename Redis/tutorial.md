### Rediså¸¸ç”¨æ“ä½œå‘½ä»¤æ•´ç†

## æ“ä½œStringï¼ˆå­—ä¸²ï¼‰é¡žåž‹

#### Â 1ã€SET è¨­ç½®éµå€¼

è¦è¨­ç½®ä¸€å€‹éµå€¼å°ï¼Œè«‹ä½¿ç”¨SETå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦å°‡éµã€Œnameã€è¨­ç½®ç‚ºå€¼ã€Œulyssesã€ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š
```r
127.0.0.1:6379> SET name ulysses
# 1
```

#### Â 2ã€GET ç²å–éµå€¼

è¦ç²å–éµå€¼ï¼Œè«‹ä½¿ç”¨GETå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–éµã€Œnameã€çš„å€¼ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š
```r
127.0.0.1:6379> GET name
# ulysses
```

Â é€™å°‡è¿”å›žéµâ€œnameâ€çš„å€¼ï¼Œâ€œulyssesâ€ã€‚


##### å°‡ Redis GETè¿” å›žæ™‚ ä»¥åŽŸå§‹çš„æ–¹å¼ä¾†é¡¯ç¤ºå…§å®¹  åŠ ä¸Šåƒæ•¸ --raw

```r
127.0.0.1:6379> SET name æœ€çµ‚å¹»æƒ³
# 1 
```

`1` æˆåŠŸã€‚

```r
127.0.0.1:6379> GET name æœ€çµ‚å¹»æƒ³
# "\xe6\x9c\x80\xe7\xb5\x82\xe5\xb9\xbb\xe6\x83\xb3" ä¸­æ–‡è¢«æ›æˆåå…­é€²åˆ¶
```

`\x` : ç‚º åå…­é€²åˆ¶

é€€å‡ºredis-cli
```r
127.0.0.1:6379> quit
# "\xe6\x9c\x80\xe7\xb5\x82\xe5\xb9\xbb\xe6\x83\xb3" ä¸­æ–‡è¢«æ›æˆåå…­é€²åˆ¶
```

å•Ÿå‹•redis åŠ ä¸Šåƒæ•¸ --raw
```r
127.0.0.1:6379> redis-cli --raw
```

- æŸ¥è©¢ 
```r
127.0.0.1:6379> GET gamename 
# æœ€çµ‚å¹»æƒ³ âœ…æ­£ç¢º
```

![](Pasted%20image%2020250929111453.png)

#### Â 3ã€è¨­ç½®éŽæœŸæ™‚é–“

Â æŸ¥çœ‹éŽæœŸæŒ‡å®škeyçš„éŽæœŸæ™‚é–“ï¼Œå¯ä»¥ç”¨TTLå‘½ä»¤ã€‚
```r
127.0.0.1:6379> TTL name
# -1 
```

`-1` : ä»£è¡¨æ²’æœ‰è¨­ç½®éŽæœŸæ™‚é–“ 

è¦ç‚ºä¸€å€‹éµè¨­ç½®éŽæœŸæ™‚é–“ï¼Œè«‹ä½¿ç”¨EXPIREå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦å°‡éµã€Œnameã€çš„éŽæœŸæ™‚é–“è¨­ç½®ç‚º **5** ç§’ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š
```r
127.0.0.1:6379> EXPIRE name 5
# 1 
```

Â æŸ¥çœ‹éŽæœŸæŒ‡å®škeyçš„éŽæœŸæ™‚é–“ï¼Œå¯ä»¥ç”¨TTLå‘½ä»¤ã€‚
```r
127.0.0.1:6379> TTL name
# 4 å€’æ•¸ä¸­ ...
127.0.0.1:6379> TTL name
# 3 å€’æ•¸ä¸­ ...
127.0.0.1:6379> TTL name
# 2 å€’æ•¸ä¸­ ...
127.0.0.1:6379> TTL name
# 1 å€’æ•¸ä¸­ ...
127.0.0.1:6379> TTL name
# -2 çµæŸåˆªé™¤ ...
```

è¿”å›žçš„çµæžœä¾¿æ˜¯å‰©é¤˜æ™‚é–“ï¼ˆåˆ°æœŸkeyæœƒè‡ªå‹•åˆªé™¤[ç›®å‰å…ˆé€™éº¼èªç‚ºï¼Œä¸åŒç‰ˆæœ¬çš„ä¸åŒè§’è‰²è™•ç†æœ‰å·®ç•°]ï¼‰ï¼Œå¦‚æžœè¿”å›ž-1ï¼Œå‰‡è¡¨ç¤ºç„¡éŽæœŸæ™‚é–“

`-2`ï¼Œèªªæ˜Žkeyä¸å­˜åœ¨ã€‚

éµå­˜åœ¨è¿”å›ž `1`
éµä¸å­˜åœ¨è¿”å›ž`0`

#### Â 4ã€ä¸‰ç¨®æ–¹å¼å¯åˆ¤æ–·éµæ˜¯å¦å­˜åœ¨

![](Pasted%20image%2020250929114511.png)

##### ä½¿ç”¨ EXISTS æŒ‡ä»¤

è¦æª¢æŸ¥ä¸€å€‹éµæ˜¯å¦å­˜åœ¨ï¼Œè«‹ä½¿ç”¨EXISTSå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦æª¢æŸ¥éµã€Œnameã€æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š
```r
127.0.0.1:6379> EXISTS name
# 0 
```

`0` : ä¸å­˜åœ¨
##### ä½¿ç”¨ TYPE æŒ‡ä»¤

```r
127.0.0.1:6379> TYPE name
# none 
```

`none` : æ²’æœ‰é€™å€‹é¡žåž‹ï¼Œä»£è¡¨ key ä¸å­˜åœ¨ã€‚

è¿”å›žå°æ‡‰çš„é¡žåž‹ï¼ˆå¦‚ï¼Œstringï¼‰å‰‡èªªæ˜Žkeyå­˜åœ¨ï¼Œè¿”å›žâ€œnoneâ€èªªæ˜Žkeyä¸å­˜åœ¨ã€‚

##### ä½¿ç”¨ TTL æŒ‡ä»¤

```r
127.0.0.1:6379> TTL name
# -1 
```

#### Â 5ã€åˆªé™¤éµ

è¦åˆªé™¤ä¸€å€‹éµï¼Œè«‹ä½¿ç”¨DELå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦åˆªé™¤éµã€Œnameã€ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š
```r
127.0.0.1:6379> DEL aaa
```

#### Â 6ã€è‡ªå¢ž/è‡ªæ¸›æ“ä½œ

è¦å°ä¸€å€‹éµé€²è¡Œè‡ªå¢žæ“ä½œï¼Œè«‹ä½¿ç”¨INCRå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦å°‡éµã€Œcountã€è‡ªå¢ž1ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

å…ˆ SET è¨­ç½® ä¸€å€‹`count` è®Šæ•¸ç‚º 10 ( INT )  ä¸¦ä½¿ç”¨ GET æŸ¥çœ‹å…§å®¹
```r
127.0.0.1:6379> SET count 10
# OK 
127.0.0.1:6379> GET count 10
# 10
```

##### ä½¿ç”¨ INCRå‘½ä»¤

```r
127.0.0.1:6379> INCR count
# 11
127.0.0.1:6379> INCR count
# 12
127.0.0.1:6379> INCR count
# 13
```

##### ä½¿ç”¨ DECRå‘½ä»¤

é¡žä¼¼åœ°ï¼Œè¦å°ä¸€å€‹éµé€²è¡Œè‡ªæ¸›æ“ä½œï¼Œè«‹ä½¿ç”¨DECRå‘½ä»¤ï¼Œä¾‹å¦‚ï¼Œè¦å°‡éµã€Œcountã€è‡ªæ¸›1ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š
```r
127.0.0.1:6379> DECR count
# 12
127.0.0.1:6379> DECR count
# 11
127.0.0.1:6379> DECR count
# 10
```

##### ä½¿ç”¨ SETEX æŒ‡ä»¤

é€™å€‹å‘½ä»¤ æ˜¯[[#1ã€SET è¨­ç½®éµå€¼ | SET ]] + [[#ä½¿ç”¨ EXISTS æŒ‡ä»¤ | EXPIRE]] çš„åˆé«” 

```r
127.0.0.1:6379> SETEX name 5 æœ€çµ‚å¹»æƒ³
# OK
127.0.0.1:6379> TTL name 
# 4 å€’æ•¸ä¸­..
# 3 å€’æ•¸ä¸­..
# 2 å€’æ•¸ä¸­..
# 1 å€’æ•¸ä¸­..
# -2 çµæŸåˆªé™¤ ...
```
SETEX name 5 æœ€çµ‚å¹»æƒ³ `è¨­ç½® Keyçš„å€¼ name  + 5ç§’é˜ + value çš„å€¼

##### ä½¿ç”¨ SETNX æŒ‡ä»¤

```r
127.0.0.1:6379> SETNX name æœ€çµ‚å¹»æƒ³
# OK
127.0.0.1:6379> SETNX name æœ€çµ‚å¹»æƒ³1
# 0
# ä»£è¡¨ä¸èƒ½è¢«ä¿®æ”¹ï¼Œå·²ç¶“æœ‰nameé€™å€‹å€¼
127.0.0.1:6379> GET name
# æœ€çµ‚å¹»æƒ³
```

---

## Â æ“ä½œå“ˆå¸Œè¡¨ï¼ˆHashé¡žåž‹ï¼‰

Redisä¸­çš„Hashé¡žåž‹æ˜¯ä¸€å€‹éµå€¼å°çš„é›†åˆï¼Œå…¶ä¸­æ¯å€‹éµéƒ½æ˜ å°„åˆ°ä¸€å€‹å€¼ã€‚ ä¸‹é¢æ˜¯Redisä¸­Hashé¡žåž‹çš„å¸¸è¦‹æ“ä½œï¼š

#### Â 1ã€è¨­ç½®Hashå€¼

è¦è¨­ç½®ä¸€å€‹Hashå€¼ï¼Œè«‹ä½¿ç”¨HSETå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦å°‡ã€Œpersonã€å“ˆå¸Œä¸­çš„ã€Œnameã€å­—æ®µè¨­ç½®ç‚ºã€Œulyssesã€ï¼Œage ã€Œ28 ã€å¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> HSET person name ulysses
# 1 
127.0.0.1:6379> HSET person age 28
# 1 
```

#### Â 2ã€ç²å–Hashå€¼

è¦ç²å–ä¸€å€‹Hashå€¼ï¼Œè«‹ä½¿ç”¨HGETå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–ã€Œpersonã€å“ˆå¸Œä¸­çš„ã€Œnameã€å­—æ®µçš„å€¼ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> HGET person name
# ulysses
127.0.0.1:6379> HGET person age
# 28
```

#### Â 3ã€ç²å–æ‰€æœ‰Hashå€¼

è¦ç²å–æ‰€æœ‰çš„Hashå€¼ï¼Œè«‹ä½¿ç”¨HGETALLå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–ã€Œpersonã€å“ˆå¸Œä¸­æ‰€æœ‰çš„éµå€¼å°ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

é€™å°‡è¿”å›žä¸€å€‹åŒ…å«æ‰€æœ‰éµå€¼å°çš„æ¸…å–®
```r
127.0.0.1:6379> HGETALL person
# name
# ulysses
# age
# 28
```

#### Â 4ã€åˆªé™¤Hashå€¼

è¦åˆªé™¤ä¸€å€‹Hashå€¼ï¼Œè«‹ä½¿ç”¨HDELå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦åˆªé™¤ã€Œpersonã€å“ˆå¸Œä¸­çš„ageå­—æ®µï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> HDEL person age
# 1

127.0.0.1:6379> HGETALL person
# name
# ulysses
# æœƒçœ‹åˆ°åªå‰©ä¸‹name 
```

#### Â 5ã€æª¢æŸ¥Hashå€¼æ˜¯å¦å­˜åœ¨

è¦æª¢æŸ¥ä¸€å€‹Hashå€¼æ˜¯å¦å­˜åœ¨ï¼Œè«‹ä½¿ç”¨HEXISTSå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦æª¢æŸ¥ã€Œpersonã€å“ˆå¸Œä¸­æ˜¯å¦å­˜åœ¨ã€Œnameã€å­—æ®µï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> HEXISTS person name
# 1
127.0.0.1:6379> HEXISTS person age
# 0
```

Â å¦‚æžœå­˜åœ¨ï¼Œå°‡è¿”å›ž1; å¦å‰‡è¿”å›ž0ã€‚

#### Â 6ã€ç²å–Hashä¸­æ‰€æœ‰çš„éµ

è¦ç²å–ä¸€å€‹Hashä¸­æ‰€æœ‰çš„éµï¼Œè«‹ä½¿ç”¨HKEYSå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–ã€Œpersonã€å“ˆå¸Œä¸­çš„æ‰€æœ‰éµ KEY ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> HKEYS person
# name
```

Â é€™å°‡è¿”å›žä¸€å€‹åŒ…å«æ‰€æœ‰éµçš„æ¸…å–®ã€‚

#### Â 7ã€ç²å–Hashä¸­æ‰€æœ‰çš„å€¼

è¦ç²å–ä¸€å€‹Hashä¸­æ‰€æœ‰çš„å€¼ï¼Œè«‹ä½¿ç”¨HVALSå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–ã€Œpersonã€å“ˆå¸Œä¸­çš„æ‰€æœ‰å€¼ Valueï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> HVALS person
# ulysses 
```

Â é€™å°‡è¿”å›žä¸€å€‹åŒ…å«æ‰€æœ‰å€¼çš„æ¸…å–®ã€‚

---
## Â æ“ä½œæ¸…å–®ï¼ˆlisté¡žåž‹ï¼‰

Redisä¸­çš„Listé¡žåž‹æ˜¯ä¸€å€‹éˆè¡¨çµæ§‹ï¼Œå…¶ä¸­æ¯å€‹ç¯€é»žéƒ½åŒ…å«ä¸€å€‹å­—å…ƒä¸²å€¼ã€‚ ä¸‹é¢æ˜¯Redisä¸­Listé¡žåž‹çš„å¸¸è¦‹æ“ä½œï¼š
å‰µå»ºä¸€å€‹æ–°çš„listé¡žåž‹ : å¯ä»¥ä½¿ç”¨  `LPUSH + key element` ã€ `RPUSH + key element`  
#### Â 1ã€åœ¨æ¸…å–®çš„é ­éƒ¨æ’å…¥å…ƒç´ 

ä½¿ç”¨ LPUSH 

è«‹ä½¿ç”¨LPUSHå‘½ä»¤åœ¨æ¸…å–®çš„é ­éƒ¨æ’å…¥å…ƒç´ ï¼Œä¾‹å¦‚ï¼Œè¦åœ¨åç‚ºã€Œmylistã€çš„æ¸…å–®çš„é ­éƒ¨æ’å…¥å€¼ç‚ºã€Œbã€çš„å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> LPUSH mylist b 
# 1 
127.0.0.1:6379> LPUSH mylist a # å¾žé ­å†æ·»åŠ  a
# 2
```

#### Â 2ã€åœ¨æ¸…å–®çš„å°¾éƒ¨æ’å…¥å…ƒç´ 

ä½¿ç”¨ LPUSH 

è«‹ä½¿ç”¨RPUSHå‘½ä»¤åœ¨æ¸…å–®çš„å°¾éƒ¨æ’å…¥å…ƒç´ ï¼Œ ä¾‹å¦‚ï¼Œè¦åœ¨åç‚ºã€Œmylistã€çš„æ¸…å–®çš„å°¾éƒ¨æ’å…¥å€¼ç‚ºã€Œcã€çš„å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> RPUSH mylist c # å¾žå°¾å·´æ·»åŠ  c 
# 3 
```

#### Â 3ã€ç²å–æ¸…å–®é•·åº¦

è¦ç²å–æ¸…å–®çš„é•·åº¦ï¼Œè«‹ä½¿ç”¨LLENå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–åç‚ºã€Œmylistã€çš„æ¸…å–®çš„é•·åº¦ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> LLEN mylist
# 3
```

Â é€™å°‡è¿”å›žæ¸…å–®çš„é•·åº¦ã€‚

#### Â 4ã€ç²å–æ¸…å–®ä¸­çš„å–®å€‹å…ƒç´ 

è¦ç²å–æ¸…å–®ä¸­çš„å…ƒç´ ï¼Œè«‹ä½¿ç”¨LINDEXå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–åç‚ºã€Œmylistã€çš„æ¸…å–®ä¸­çš„ç¬¬ä¸€å€‹å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> LINDEX mylist 0 # å–å¾—ç¬¬ä¸€å€‹
# a
127.0.0.1:6379> LINDEX mylist 2 # å–å¾—ç¬¬ä¸‰å€‹
# c
```

#### Â 5ã€ç²å–æ¸…å–®çš„ç¯„åœ

è¦ç²å–æ¸…å–®çš„ä¸€éƒ¨åˆ†ï¼Œè«‹ä½¿ç”¨LRANGEå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–åç‚ºã€Œmylistã€çš„æ¸…å–®ä¸­å¾žç¬¬äºŒå€‹åˆ°ç¬¬å››å€‹å…ƒç´ ä¹‹é–“çš„å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

é€™å°‡è¿”å›žä¸€å€‹åŒ…å«ç¬¬ä¸€å€‹åˆ°æœ€å¾Œä¸€å€‹å…ƒç´ ä¹‹é–“çš„æ‰€æœ‰å…ƒç´ çš„æ¸…å–®ã€‚
```r
127.0.0.1:6379> LRANGE mylist 0 -1 
# a
# b
# c
```

#### Â 6ã€åˆªé™¤æ¸…å–®ä¸­çš„å…ƒç´ 

è¦åˆªé™¤æ¸…å–®ä¸­çš„å…ƒç´ ï¼Œè«‹ä½¿ç”¨LREMå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦åˆªé™¤åç‚ºã€Œmylistã€çš„æ¸…å–®ä¸­çš„æ‰€æœ‰å€¼ç‚ºã€Œcccã€çš„å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> LPUSH mylist a # å†æ·»åŠ ä¸€å€‹ a
# 4
127.0.0.1:6379> LRANGE mylist 0 - 1
# a
# b 
# c
# a
127.0.0.1:6379> LREM mylist 0 a
# 2 
127.0.0.1:6379> LRANGE mylist 0 - 1
# b
# c
# å°‡aå…ƒç´ å…¨éƒ½åˆªé™¤

```
#### Â 7ã€å½ˆå‡ºæ¸…å–®ä¸­çš„å…ƒç´ 
##### ä½¿ç”¨ LPOP å‘½ä»¤
è¦å¾žæ¸…å–®çš„é ­éƒ¨å½ˆå‡ºå…ƒç´ ï¼Œè«‹ä½¿ç”¨LPOPå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦å¾žåç‚ºã€Œmylistã€çš„æ¸…å–®çš„é ­éƒ¨å½ˆå‡ºä¸€å€‹å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> LPUSH mylist a # å¾žé ­å†æ·»åŠ ä¸€å€‹ a
127.0.0.1:6379> RPUSH mylist d # å¾žå°¾å†æ·»åŠ ä¸€å€‹ d
127.0.0.1:6379> LRANGE mylist 0 -1 
# a 
# b 
# c
# d
127.0.0.1:6379> LPOP mylist # å°‡é ­çš„aæŽ’é™¤
# a # é€™å°‡å½ˆå‡ºä¸¦è¿”å›žæ¸…å–®çš„ç¬¬ä¸€å€‹å…ƒç´ ã€‚
```

##### ä½¿ç”¨ RPOPå‘½ä»¤
è¦å¾žæ¸…å–®çš„å°¾éƒ¨å½ˆå‡ºå…ƒç´ ï¼ŒRPOPå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦å¾žåç‚ºã€Œmylistã€çš„æ¸…å–®çš„å°¾éƒ¨å½ˆå‡ºä¸€å€‹å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> LPOP mylist # å°‡é ­çš„aæŽ’é™¤
# d # é€™å°‡å½ˆå‡ºä¸¦è¿”å›žæ¸…å–®çš„ç¬¬ä¸€å€‹å…ƒç´ ã€‚
```

ðŸ’¡ä¹Ÿå¯ä»¥ä½¿ç”¨ LPOPå‘½ä»¤ å’Œ RPOPå‘½ä»¤ åˆªé™¤å¤šå€‹å…§å®¹ : 
```r
127.0.0.1:6379> LRANGE mylist 0 -1 
# a 
# b 
# c
# d
127.0.0.1:6379> LPOP mylist 2  # å°‡é ­çš„å…©å€‹å…ƒç´ æŽ’é™¤
# a
# b
127.0.0.1:6379> RPOP mylist 2  # å°‡å°¾çš„å…©å€‹å…ƒç´ æŽ’é™¤
# c
# d
```

#### Â 8ã€åœ¨æŒ‡å®šæ¸…å–®å…§ å‰èˆ‡å¾Œ åŠ å…¥æ–°å…ƒç´ 

##### ä½¿ç”¨ LINSERT å‘½ä»¤ 

ç¯„ä¾‹ : 
```r 
LINSERT åˆ—è¡¨ BEFORE|AFTER å…ƒç´ 

# BEFORE
LINSERT mylist BEFORE "ç¬¬ä¸‰ä½" "ç¬¬äºŒä½"
# AFTER
LINSERT mylist AFTER "ç¬¬ä¸‰ä½" "ç¬¬å››ä½"
```

```r
127.0.0.1:6379> RPUSH mylist "ç¬¬ä¸€ä½"
# 1

127.0.0.1:6379> RPUSH mylist "ç¬¬ä¸‰ä½"
# 2

127.0.0.1:6379> LRANGE mylist 0 -1
# ç¬¬ä¸€ä½
# ç¬¬ä¸‰ä½


# åœ¨ "ç¬¬ä¸‰ä½" ä¹‹å‰ä½¿ç”¨ BFEROE æ’å…¥å…ƒç´  "ç¬¬äºŒä½"
127.0.0.1:6379> LINSERT mylist BEFORE "ç¬¬ä¸‰ä½" "ç¬¬äºŒä½"
# 3

127.0.0.1:6379> LRANGE mylist 0 -1
# ç¬¬ä¸€ä½
# ç¬¬äºŒä½
# ç¬¬ä¸‰ä½

# åœ¨ "ç¬¬ä¸‰ä½" ä¹‹å¾Œä½¿ç”¨ AFTER æ’å…¥å…ƒç´  "ç¬¬å››ä½"
127.0.0.1:6379> LINSERT mylist AFTER "ç¬¬ä¸‰ä½" "ç¬¬å››ä½"
# 4

127.0.0.1:6379> LRANGE mylist 0 -1
# ç¬¬ä¸€ä½
# ç¬¬äºŒä½
# ç¬¬ä¸‰ä½
# ç¬¬å››ä½

```

## Â ç„¡åºé›†åˆï¼ˆseté¡žåž‹ï¼‰æ“ä½œ

Redisä¸­çš„Seté¡žåž‹æ˜¯ä¸€å€‹ç„¡åºçš„ã€ä¸é‡è¤‡çš„å­—ä¸²é›†åˆã€‚ ä¸‹é¢æ˜¯Redisä¸­Seté¡žåž‹çš„å¸¸è¦‹æ“ä½œï¼š

#### 1ã€å‘é›†åˆä¸­æ·»åŠ å…ƒç´ 

è¦å‘é›†åˆä¸­æ·»åŠ å…ƒç´ ï¼Œè«‹ä½¿ç”¨SADDå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦å°‡å€¼ç‚ºã€Œulyssesã€çš„å…ƒç´ æ·»åŠ åˆ°åç‚ºã€Œmysetã€çš„é›†åˆä¸­ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> SADD myset ulysses
# 1 
127.0.0.1:6379> SADD myset ulysses
# 0
```

#### Â 2ã€ç²å–é›†åˆä¸­çš„å…ƒç´ æ•¸é‡

è¦ç²å–é›†åˆä¸­çš„å…ƒç´ æ•¸é‡ï¼Œè«‹ä½¿ç”¨SCARDå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–åç‚ºã€Œmysetã€çš„é›†åˆä¸­çš„å…ƒç´ æ•¸é‡ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> SCARD myset
# 1
```

#### Â 3ã€ç²å–é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ 

è¦ç²å–é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œè«‹ä½¿ç”¨SMEMBERSå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–åç‚ºã€Œmysetã€çš„é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> SMEMBERS myset
# ulysses
```

Â é€™å°‡è¿”å›žä¸€å€‹åŒ…å«æ‰€æœ‰å…ƒç´ çš„æ¸…å–®ã€‚

#### Â 4ã€åˆ¤æ–·å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­å­˜åœ¨

è¦åˆ¤æ–·ä¸€å€‹å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­å­˜åœ¨ï¼Œè«‹ä½¿ç”¨SISMEMBERå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦åˆ¤æ–·å€¼ç‚ºã€Œcttã€çš„å…ƒç´ æ˜¯å¦å­˜åœ¨æ–¼åç‚ºã€Œmysetã€çš„é›†åˆä¸­ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> SISMEMBER myset ulysses
# 1
127.0.0.1:6379> SISMEMBER myset tony
# 0 
# å› ç‚ºtonyä¸åœ¨setè£¡é¢ï¼Œè¿”å›ž0
```

Â å¦‚æžœå…ƒç´ å­˜åœ¨æ–¼é›†åˆä¸­ï¼Œå‰‡è¿”å›ž1; å¦å‰‡è¿”å›ž0ã€‚

#### Â 5ã€å¾žé›†åˆä¸­åˆªé™¤å…ƒç´ 

è¦å¾žé›†åˆä¸­åˆªé™¤å…ƒç´ ï¼Œè«‹ä½¿ç”¨SREMå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦åˆªé™¤åç‚ºã€Œmysetã€çš„é›†åˆä¸­å€¼ç‚ºã€Œctt2ã€çš„å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š
```r
127.0.0.1:6379> SREM myset ulysses
# 1 
```

#### Â 6ã€æ±‚å¤šå€‹é›†åˆçš„äº¤é›†ã€å·®é›†æˆ–ä¸¦é›†

- æ‰¾å‡ºå¤šå€‹é›†åˆçš„äº¤é›†ï¼Œè«‹ä½¿ç”¨SINTERå‘½ä»¤ã€‚
- æ‰¾å‡ºå¤šå€‹é›†åˆçš„ä¸¦é›†ï¼Œè«‹ä½¿ç”¨SUNIONå‘½ä»¤ã€‚
- æ‰¾å‡ºå¤šå€‹é›†åˆçš„å·®é›†ï¼Œè«‹ä½¿ç”¨SDIFFå‘½ä»¤ã€‚ 

å…ˆæ–°å¢ž`SET`é›†åˆ :  set1ã€set2ã€set3 ä¸¦æ·»åŠ ä»¥ä¸‹å…§å®¹
```r
127.0.0.1:6379> SADD set1 1 2 3 4 5
127.0.0.1:6379> SADD set2 3 4 5 6 7
127.0.0.1:6379> SADD set3 7 6 5 4 3 
```

##### ä½¿ç”¨ SINTER å‘½ä»¤ 

æ‰¾å‡ºå¤šå€‹é›†åˆ `set1ã€set2ã€set3` çš„äº¤é›†
```r
127.0.0.1:6379> SINTER set1 set2 set3
# 3
# 4
# 5
```
äº¤é›†æ•¸å­— ç‚º 3ã€4ã€5 
##### ä½¿ç”¨ SUNION å‘½ä»¤ 

æ‰¾å‡ºå¤šå€‹é›†åˆ `set1ã€set2ã€set3` çš„ä¸¦é›† (ä¸‰è€…ä¹‹é–“æ²’æœ‰é‡è¤‡çš„æ•¸å­—)
```r
127.0.0.1:6379> SINTER set1 set2 set3
# 1
# 2 
# 3
# 4
# 5
# 6
# 7
```

##### ä½¿ç”¨ SDIFF å‘½ä»¤ 

ç”¨ç¬¬ä¸€å€‹`set1`é›†åˆå…§çš„æ¸›åŽ»å…¶ä»–é›†åˆ `set2ã€set3` çš„å·®é›† ( å…¶ä»–é›†åˆå…§æ²’æœ‰çš„æ•¸å­— )
```r
127.0.0.1:6379> SINTER set1 set2 set3
# 1
# 2
```

Â é€™å°‡è¿”å›žä¸€å€‹åŒ…å«æ‰€æœ‰é›†åˆçš„äº¤é›†&ä¸¦é›†å…ƒç´ çš„æ¸…å–®ã€‚
é€™äº›æ˜¯Redisä¸­Seté¡žåž‹çš„ä¸€äº›å¸¸è¦‹æ“ä½œã€‚ Seté¡žåž‹æ˜¯ä¸€å€‹éžå¸¸æœ‰ç”¨çš„æ•¸æ“šçµæ§‹ï¼Œå¯ç”¨æ–¼å­˜å„²å’Œè™•ç†å¤šå€‹ç›¸é—œä½†ä¸é‡è¤‡çš„å…ƒç´ ã€‚

#### Â 7ã€æ±‚å¤šå€‹é›†åˆçš„äº¤é›†ã€å·®é›†æˆ–ä¸¦é›† ä¸¦å„²å­˜ç‚ºå¦ä¸€å€‹æ–°é›†åˆ

- æ‰¾å‡ºå¤šå€‹é›†åˆçš„äº¤é›†ï¼Œè«‹ä½¿ç”¨ SINTERSTORE å‘½ä»¤ã€‚
- æ‰¾å‡ºå¤šå€‹é›†åˆçš„ä¸¦é›†ï¼Œè«‹ä½¿ç”¨ SUNIONSTORE å‘½ä»¤ã€‚
- æ‰¾å‡ºå¤šå€‹é›†åˆçš„å·®é›†ï¼Œè«‹ä½¿ç”¨ SDIFFSTORE å‘½ä»¤ã€‚ 

##### ä½¿ç”¨ SINTERSTORE å‘½ä»¤ 

```r
127.0.0.1:6379> SINTERSTORE result1 set1 set2 set3
# 3 
# é‹ç®—çµæžœæœ‰ç¬¦åˆæœ‰3å€‹å…ƒç´ 

127.0.0.1:6379> SMEMBERS result1 # æŸ¥çœ‹ result1 é‹ç®—çµæžœ
# 3
# 4
# 5
```

##### ä½¿ç”¨ SUNIONSTORE å‘½ä»¤ 

```r
127.0.0.1:6379> SUNIONSTORE result2 set1 set2 set3
# 7
# é‹ç®—çµæžœæœ‰ç¬¦åˆæœ‰7å€‹å…ƒç´ 

127.0.0.1:6379> SMEMBERS result2 # æŸ¥çœ‹ result2 é‹ç®—çµæžœ
# 1
# 2 
# 3
# 4
# 5
# 6
# 7
```

##### ä½¿ç”¨ SDIFFSTORE å‘½ä»¤ 

```r
127.0.0.1:6379> SDIFFSTORE result3 set1 set2 set3
# 2
# é‹ç®—çµæžœæœ‰ç¬¦åˆæœ‰2å€‹å…ƒç´ 

127.0.0.1:6379> SMEMBERS result3 # æŸ¥çœ‹ result3 é‹ç®—çµæžœ
# 1
# 2
```


---

## Â æœ‰åºé›†åˆï¼ˆZSeté¡žåž‹ï¼‰æ“ä½œ

Redisä¸­çš„æœ‰åºé›†åˆï¼ˆSorted Setï¼Œç°¡ç¨±ZSetï¼‰æ˜¯ä¸€å€‹éžå¸¸æœ‰ç”¨çš„æ•¸æ“šçµæ§‹ï¼Œå®ƒé¡žä¼¼æ–¼Seté¡žåž‹ï¼Œä½†æ˜¯æ¯å€‹å…ƒç´ éƒ½æœƒé—œè¯ä¸€å€‹åˆ†æ•¸ï¼ˆscoreï¼‰ï¼Œä¸”å…ƒç´ æŒ‰ç…§åˆ†æ•¸å¾ž**å°åˆ°å¤§é€²è¡ŒæŽ’åº**ã€‚ ä¸‹é¢æ˜¯Redisä¸­ZSeté¡žåž‹çš„å¸¸è¦‹æ“ä½œï¼š

#### 1ã€å‘æœ‰åºé›†åˆä¸­æ·»åŠ å…ƒç´ 

è¦å‘æœ‰åºé›†åˆä¸­æ·»åŠ å…ƒç´ ï¼Œè«‹ä½¿ç”¨ZADDå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦å°‡å€¼ç‚ºã€ŒAã€çš„å…ƒç´ æ·»åŠ åˆ°åç‚ºã€Œmyzsetã€çš„æœ‰åºé›†åˆä¸­ï¼Œä¸”å®ƒçš„åˆ†æ•¸ç‚º100ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

å…ˆæ–°å¢ž`ZSET`é›†åˆ :  Aã€Bã€C ã€D ä¸¦æ·»åŠ ä»¥ä¸‹å…§å®¹
```r
127.0.0.1:6379> ZADD myzset 100 A 200 B 300 C 400 D
# 4 
```

#### Â 2ã€ç²å–æœ‰åºé›†åˆä¸­çš„å…ƒç´ æ•¸é‡

è¦ç²å–æœ‰åºé›†åˆä¸­çš„å…ƒç´ æ•¸é‡ï¼Œè«‹ä½¿ç”¨ZCARDå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–åç‚ºã€Œmyzsetã€çš„æœ‰åºé›†åˆä¸­çš„å…ƒç´ æ•¸é‡ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> ZCARD myzset
# 4 
```

#### Â 3ã€ç²å–æœ‰åºé›†åˆä¸­æŒ‡å®šç¯„åœå…§çš„å…ƒç´ 

è¦ç²å–æœ‰åºé›†åˆä¸­æŒ‡å®šç¯„åœå…§çš„å…ƒç´ ï¼Œè«‹ä½¿ç”¨ZRANGEå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–åç‚ºã€Œmyzsetã€çš„æœ‰åºé›†åˆä¸­æŽ’ååœ¨1åˆ°3ä¹‹é–“çš„å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

```r
127.0.0.1:6379> ZRANGE myzset 0 -1 
# A
# B
# C
# D
```

ä¹Ÿå¯ä»¥åŠ å…¥åƒæ•¸ï¼Œç²å¾—å…ƒç´ ä¸­çš„åˆ†æ•¸ `COUNT`

```r
127.0.0.1:6379> ZRANGE myzset 0 -1 WITHSCORES
# A
# 100
# B
# 200
# C
# 300
# D
# 400
```

Â é€™å°‡è¿”å›žä¸€å€‹åŒ…å«æŒ‡å®šå…ƒç´ çš„æ¸…å–®ã€‚
Â 

#### Â 4ã€ç²å–æœ‰åºé›†åˆä¸­æŒ‡å®šåˆ†æ•¸ç¯„åœå…§çš„å…ƒç´ 

è¦ç²å–æœ‰åºé›†åˆä¸­æŒ‡å®šåˆ†æ•¸ç¯„åœå…§çš„å…ƒç´ ï¼Œè«‹ä½¿ç”¨ZRANGEBYSCOREå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–åç‚ºã€Œmyzsetã€çš„æœ‰åºé›†åˆä¸­åˆ†æ•¸åœ¨100åˆ°200ä¹‹é–“çš„å…ƒç´ ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š


```r
127.0.0.1:6379> ZRANGEBYSCORE myzset 100 200
# A
# B
```

ä¹Ÿå¯ä»¥åŠ å…¥åƒæ•¸ `WITHSCORES` ï¼Œç²å¾—å…ƒç´ ä¸­çš„åˆ†æ•¸ `COUNT`
```r
127.0.0.1:6379> ZRANGEBYSCORE myzset 100 200 WITHSCORES
# A
# 100
# B
# 200
```

#### Â 5ã€ç²å–æœ‰åºé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„æŽ’å

è¦ç²å–æœ‰åºé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„æŽ’åï¼Œè«‹ä½¿ç”¨ZRANKå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–åç‚ºã€Œmyzsetã€çš„æœ‰åºé›†åˆä¸­å…ƒç´ ã€ŒAã€çš„æŽ’åï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š


```r
127.0.0.1:6379> ZRANK myzset A 
# 0
# ç”±å°åˆ°å¤§çš„æ•¸å­— 
```

ä¹Ÿå¯ä»¥åŠ å…¥åƒæ•¸ `WITHSCORES` ï¼Œç²å¾—å…ƒç´ ä¸­çš„åˆ†æ•¸ `COUNT`

```r
127.0.0.1:6379> ZRANK myzset A WITHSCORE
# 0
# 100 
```
#### Â 6ã€ç²å–æœ‰åºé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„åˆ†æ•¸

è¦ç²å–æœ‰åºé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„åˆ†æ•¸ï¼Œè«‹ä½¿ç”¨ZSCOREå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦ç²å–åç‚ºã€Œmyzsetã€çš„æœ‰åºé›†åˆä¸­å…ƒç´ ã€Œ Aã€çš„åˆ†æ•¸ï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š

   
```r
127.0.0.1:6379> ZSCORE myzset A 
# 100 
```

#### Â 7ã€å¾žæœ‰åºé›†åˆä¸­åˆªé™¤å…ƒç´ 

è¦å¾žæœ‰åºé›†åˆä¸­åˆªé™¤å…ƒç´ ï¼Œè«‹ä½¿ç”¨ZREMå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œè¦åˆªé™¤åç‚ºã€Œmyzsetã€çš„æœ‰åºé›†åˆä¸­å…ƒç´ ã€aâ€œï¼Œå¯ä»¥åŸ·è¡Œä»¥ä¸‹æ“ä½œï¼š


```r
127.0.0.1:6379> ZREM myzset A
# 1 
```
